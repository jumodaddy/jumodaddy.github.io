<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"/></head><body><div class="section" title="Optimális döntések kétszemélyes játékokban"><div class="titlepage"><div><div><h1 class="title"><a id="id569141"/>Optimális döntések kétszemélyes játékokban</h1></div></div></div><p>A kétszemélyes játékokkal fogunk foglalkozni, ahol a két játékost – a hamarosan nyilvánvalóvá váló okból – <code class="code">MAX</code>-nak és <code class="code">MIN</code>-nek fogjuk hívni. <code class="code">MAX</code> lép először, majd a játékosok felváltva lépnek, amíg a játék véget nem ér. A játék végén a győztes játékos pontokat kap (vagy néha a vesztes kap büntetőpontokat). A játékot formálisan egyfajta keresési problémaként lehet definiálni az alábbi komponensekkel:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p class="List Paragraph">A <span class="strong"><strong>kiinduló állapot</strong></span> (<span class="strong"><strong>initial state</strong></span>), ami magában foglalja a táblaállást, valamint azt, hogy ki fog lépni.</p></li><li class="listitem"><p class="List Paragraph">Egy <span class="strong"><strong>állapotátmenet-függvény</strong></span> (<span class="strong"><strong>successor function</strong></span>), amely (<span class="emphasis"><em>lépés</em></span>, <span class="emphasis"><em>állapot</em></span>) párok listájával tér vissza, megadva a legális lépéseket és az azokból következő állapotokat.</p></li><li class="listitem"><p class="List Paragraph">Egy <span class="strong"><strong>végteszt</strong></span> (<span class="strong"><strong>terminal test</strong></span>), ami meghatározza, hogy a játéknak mikor van vége. Azok az állapotok, ahol a játék befejeződött, a <span class="strong"><strong>végállapot</strong></span>ok (<span class="strong"><strong>terminal state</strong></span>s).</p></li><li class="listitem"><p class="List Paragraph">Egy <span class="strong"><strong>hasznosságfüggvény</strong></span> (<span class="strong"><strong>utility function</strong></span>, amit <span class="strong"><strong>nyereségfüggvény</strong></span>nek – <span class="strong"><strong>payoff function</strong></span> – is neveznek) a játék végeredményéhez egy számértéket rendel. A sakkban a végeredmény győzelem, vereség vagy döntetlen lehet, amit a +1, –1 és 0 értékekkel ábrázolhatunk. Néhány játék ennél több végeredményre vezethet. Például az ostáblában a nyereség +192 és –192 között változhat. Ebben a fejezetben főleg a zérusösszegű játékokkal foglalkozunk, bár a nem zérusösszegű játékokat is megemlítjük.</p></li></ul></div><div class="figure"><a id="id569245"/><p class="title"><strong>6.1. ábra - A 3 × 3-as amőbajáték (részleges) keresési fája. A legfelső csomópont a kiinduló állapot. <code class="code">MAX</code> lép először, egy <code class="code">X</code>-et téve valamelyik üres négyzetbe. A keresési fa egy részét mutatjuk, <code class="code">MIN (O) </code> és <code class="code">MAX</code> váltakozó, egymást követő lépéseit megadva, amíg el nem érjük a végállapotokat, melyekhez a játék szabályai szerint lehet hasznossági értékeket hozzárendelni.</strong></p><div class="figure-contents"><div class="mediaobject"><img src="kepek/06-01.png" alt="A 3 × 3-as amőbajáték (részleges) keresési fája. A legfelső csomópont a kiinduló állapot. MAX lép először, egy X-et téve valamelyik üres négyzetbe. A keresési fa egy részét mutatjuk, MIN (O) és MAX váltakozó, egymást követő lépéseit megadva, amíg el nem érjük a végállapotokat, melyekhez a játék szabályai szerint lehet hasznossági értékeket hozzárendelni."/></div></div></div><p>A kezdeti állapot és mindkét fél legális lépései a játék<span class="strong"><strong> játékfá</strong></span>ját (<span class="strong"><strong>game tree</strong></span>) definiálják. A 6.1. ábra a 3 × 3-as amőbajáték keresési fájának egy részét mutatja. Kezdeti állapotban <code class="code">MAX</code>-nak kilenc lehetséges lépése van. A játék során <code class="code">MAX</code> és <code class="code">MIN</code> felváltva tesznek <code class="code">X</code>-et illetve <code class="code">O</code>-t, míg egy végállapotnak megfelelő levélcsomópontba el nem jutnak, ahol az egyik játékosnak egy sorban, egy oszlopban vagy az egy átló mentén három <code class="code">O</code>-ja vagy <code class="code">X</code>-e lesz, vagy minden négyzet ki lesz töltve. Az egyes levélcsomópontok alatt található számok a végcsomópontnak a <code class="code">MAX</code> szempontjából mért hasznosságát jelölik. A nagy értékekről feltételezzük, hogy jók <code class="code">MAX</code> számára és rosszak <code class="code">MIN</code> számára (amiből a játékosok neve is ered). <code class="code">MAX</code> feladata, hogy a játékfát (és főleg a végállapotok hasznosságát) a legjobb lépés meghatározására használja fel.</p><div class="section" title="Optimális stratégiák"><div class="titlepage"><div><div><h2 class="title"><a id="id569321"/>Optimális stratégiák</h2></div></div></div><p>Egy normális keresési problémánál, az optimális megoldás nem lenne más, mint a célállapothoz vezető lépések szekvenciája – azaz egy olyan végállapothoz vezető lépésszekvencia, amely a győzelmet jelenti. Egy játékban azonban <code class="code">MIN</code>-nek is van beleszólása a dologba. Ezért <code class="code">MAX</code>-nak egy olyan <span class="strong"><strong>stratégiá</strong></span>t (<span class="strong"><strong>strategy</strong></span>) kell találnia, amely meghatározza <code class="code">MAX</code> lépését a kezdeti állapotban, majd a <code class="code">MIN</code> lehetséges válaszaiból keletkező állapotokban, majd ismét <code class="code">MAX</code> lépéseit a <code class="code">MIN</code> erre vonatkozó lehetséges válaszaiból keletkező állapotokban és így tovább. Nagyjából azt lehet mondani, hogy egy optimális stratégia olyan kimenetelekhez vezet, amelyek legalább olyan jók, mintha bármilyen más stratégiával egy tévedhetetlen opponens ellen játszanánk. Először megmutatjuk, hogyan kell megkeresni az optimális stratégiát, bár ennek kiszámítására <code class="code">MAX</code>-nak általában nem lesz elegendő ideje az amőbánál bonyolultabb játékokban.</p><p>Még egy olyan egyszerű játék, mint az amőba is túl bonyolult ahhoz, hogy megmutassuk a teljes keresési fát, ezért áttérünk a 6.2. ábrán látható abszolút triviális játékra. <code class="code">MAX</code> lehetséges lépéseit <span class="emphasis"><em>a</em></span><sub>1</sub>-gyel, <span class="emphasis"><em>a</em></span><sub>2</sub>-vel és <span class="emphasis"><em>a</em></span><sub>3</sub>-mal címkéztük meg. Az <span class="emphasis"><em>a</em></span><sub>1</sub>-re <code class="code">MIN</code> lehetséges válaszait a <span class="emphasis"><em>b</em></span><sub>1</sub>, <span class="emphasis"><em>b</em></span><sub>2</sub>, <span class="emphasis"><em>b</em></span><sub>3</sub> stb. jelölik. Ez a konkrét játék <code class="code">MAX</code> és <code class="code">MIN</code> egy-egy lépése után véget ér. (A játékok nyelvén azt mondjuk, hogy ez a fa egy lépés mély és két fél lépésből vagy <span class="strong"><strong>lépésváltás</strong></span>ból (<span class="strong"><strong>ply</strong></span>) áll.) A végcsomópontok hasznossága ebben a játékban 2 és 14 közé esik.</p><div class="figure"><a id="id569430"/><p class="title"><strong>6.2. ábra - Egy lépésváltásos játékfa. A Δ csomópontok <code class="code">MAX</code> lépéseit, míg a ∇ csomópontok <code class="code">MIN</code> lépéseit jelölik. A végcsomópontok a hasznossági függvénnyel számított hasznossági értékeket <code class="code">MAX</code> szemszögéből mutatják, míg a többi csomópontnál a minimax értékét jelöltük be. <code class="code">MAX</code> legjobb lépése a gyökérben <span class="emphasis"><em>a</em></span><sub>1</sub>, mert ez vezet a legmagasabb minimax értékű követőhöz. <code class="code">MIN</code> legjobb válasza <span class="emphasis"><em>b</em></span><sub>1</sub>, mert ez vezet a minimális minimax értékű követőhöz.</strong></p><div class="figure-contents"><div class="mediaobject"><img src="kepek/06-02.png" alt="Egy lépésváltásos játékfa. A Δ csomópontok MAX lépéseit, míg a ∇ csomópontok MIN lépéseit jelölik. A végcsomópontok a hasznossági függvénnyel számított hasznossági értékeket MAX szemszögéből mutatják, míg a többi csomópontnál a minimax értékét jelöltük be. MAX legjobb lépése a gyökérben a1, mert ez vezet a legmagasabb minimax értékű követőhöz. MIN legjobb válasza b1, mert ez vezet a minimális minimax értékű követőhöz."/></div></div></div><p>Adott játékfa mellett az optimális stratégia meghatározásához az egyes csomópontok <span class="strong"><strong>minimax érték</strong></span>ét kell megvizsgálni, amit <code class="code">MINIMAX-ÉRTÉK</code> (<span class="emphasis"><em>n</em></span>)-ként írunk le. Egy csomópont minimax értéke a csomópont hasznossága <code class="code">MAX</code> szemszögéből, feltéve, hogy innen kezdve egészen a játék befejezéséig <span class="emphasis"><em>mindkét játékos optimálisan lép</em></span>. Egy végállapot minimax értéke természetesen a saját hasznossága. Továbbá, adott minimax értékek mellett, <code class="code">MAX</code> szeretne a maximális értékű, <code class="code">MIN</code> pedig a minimális értékű állapotba jutni. Rendelkezünk tehát az alábbi függvénnyel:</p><div class="informaltable"><table border="0"><colgroup><col width="11.1pt" class="col1"/><col width="192.9pt" class="col2"/><col width="170.3pt" class="col3"/></colgroup><tbody><tr><td colspan="3" style="text-align: justify" valign="top"><p class="Táblázatcím"><code class="code">MINIMAX-ÉRTÉK</code> (<span class="emphasis"><em>n</em></span>) =</p></td></tr><tr><td style="text-align: justify" valign="top"> </td><td style="text-align: justify" valign="top"><p class="Táblázatcím"><code class="code">HASZNOSSÁG</code> (<span class="emphasis"><em>n</em></span>)</p></td><td style="text-align: justify" valign="top"><p class="Táblázatcím">ha <span class="emphasis"><em>n</em></span> egy végállapot,</p></td></tr><tr><td style="text-align: justify" valign="top"> </td><td style="text-align: justify" valign="top"><p class="Táblázatcím">max<sub><span class="emphasis"><em>s</em></span>∈<span class="emphasis"><em>Követők</em></span>(<span class="emphasis"><em>n</em></span>)</sub> <code class="code">MINIMAX-ÉRTÉK</code>(<span class="emphasis"><em>s</em></span>)</p></td><td style="text-align: justify" valign="top"><p class="Táblázatcím">ha <span class="emphasis"><em>n</em></span> egy <code class="code">MAX</code> csomópont,</p></td></tr><tr><td style="text-align: justify" valign="top"> </td><td style="text-align: justify" valign="top"><p class="Táblázatcím">min<sub><span class="emphasis"><em>s</em></span>∈<span class="emphasis"><em>Követők</em></span>(<span class="emphasis"><em>n</em></span>)</sub> <code class="code">MINIMAX-ÉRTÉK</code>(<span class="emphasis"><em>s</em></span>)</p></td><td style="text-align: justify" valign="top"><p class="Táblázatcím">ha <span class="emphasis"><em>n</em></span> egy <code class="code">MIN</code> csomópont.</p></td></tr></tbody></table></div><p>Alkalmazzuk ezeket a definíciókat a 6.2. ábrán látható játékfára. Az ábra alján lévő célállapotokat már felcímkéztük hasznossági értékükkel. Az első, <span class="emphasis"><em>B</em></span> címkéjű, <code class="code">MIN</code> csomópontnak három követője van 3, 12 és 8 értékkel, a <span class="emphasis"><em>B</em></span> csomópont minimax értéke tehát 3. Hasonlóan a két másik <code class="code">MIN</code> csomópontnak 2 a minimax értéke. A gyökér egy <code class="code">MAX</code> csomópont; a követőinek minimax értékei 3, 2, és 2, így a gyökér minimax értéke 3. Azonosíthatjuk a gyökér <span class="strong"><strong>minimax döntés</strong></span>ét (<span class="strong"><strong>minimax decision</strong></span>) is. <code class="code">MAX</code> számára az <span class="emphasis"><em>a</em></span><sub>1</sub> cselekvés az optimális választás, mert maximális értékű követőhöz vezet.</p><p>Ezen optimális játékdefiníció <code class="code">MAX</code> számára feltételezi, hogy <code class="code">MIN</code> is optimálisan játszik – hiszen a dolgok kimenetelét <code class="code">MAX</code> számára a legrosszabb esetre kivetítve maximalizálja. Mi van azonban, ha <code class="code">MIN</code> nem játszik optimálisan? Ekkor könnyű belátni (6.2. feladat), hogy <code class="code">MAX</code> még jobban jár. Szuboptimális ellenféllel szemben sok stratégia elképzelhető, amely az optimálisnál jobb, azonban ezek a stratégiák rosszabbnak fognak bizonyulni optimális ellenfelekkel szemben.</p></div><div class="section" title="A minimax algoritmus"><div class="titlepage"><div><div><h2 class="title"><a id="id569755"/>A minimax algoritmus</h2></div></div></div><p>A <span class="strong"><strong>minimax algoritmus</strong></span> (<span class="strong"><strong>minimax algorithm</strong></span>) (6.3. ábra) az optimális döntést az aktuális állapotból számítja ki, felhasználva az egyes követő állapotok minimax értékeinek kiszámítására a definiáló egyenletekből közvetlenül származtatott, egyszerű rekurzív formulát. A rekurzió egészen a falevelekig folytatódik, majd a minimax értékeket a fa mentén <span class="strong"><strong>visszafelé terjeszt</strong></span>jük (<span class="strong"><strong>back-up</strong></span>), ahogy a rekurzió visszalép. A 6.2. ábrán például az algoritmus először rekurzív módon leereszkedik a három bal alsó csomóponthoz, a <code class="code">HASZNOSSÁG</code> függvénnyel kiszámítva, hogy az értékek rendre 3, 12, és 8. Majd az algoritmus előveszi ezen értékek minimumát, azaz 3-t, és ezt adja vissza, ahogy a <span class="emphasis"><em>B</em></span> csomóponthoz visszatér. Hasonló procedúra eredményezi a további visszaadott értékeket: 2-t a <span class="emphasis"><em>C</em></span> és 2-t a <span class="emphasis"><em>D</em></span> csomópont számára. Végül vesszük a 3, 2 és 2 értékek maximumát, hogy a gyökér által visszaadott 3-as értéket megkaphassuk.</p><p>A minimax algoritmus a játékfa teljes mélységi feltárását végzi. Ha a fa maximális mélysége <span class="emphasis"><em>m</em></span>, és minden csomópontban <span class="emphasis"><em>b</em></span> legális lépés létezik, akkor a minimax algoritmus időkomplexitása <span class="emphasis"><em>O</em></span>(<span class="emphasis"><em>b<sup>m</sup></em></span>). A tárkomplexitása <span class="emphasis"><em>O</em></span>(<span class="emphasis"><em>bm</em></span>) egy olyan algoritmus számára, amely az összes követőt egyszerre számítja ki, és <span class="emphasis"><em>O</em></span>(<span class="emphasis"><em>m</em></span>) egy olyan algoritmus esetében, amely a követőket egyenként generálja <a class="xref" href="ch03s04.md#ID_115_116_oldal">„Mélységi keresés”</a>. Valós játékok esetén ez az időkomplexitás az algoritmust teljesen haszontalanná teszi, az algoritmus azonban jó alap a játékok matematikai elemzéséhez és a gyakorlati szempontból alkalmasabb algoritmusokhoz.</p><div class="figure"><a id="id569832"/><p class="title"><strong>6.3. ábra - Egy algoritmus a minimax döntések kiszámítására. Az algoritmus a lehető legjobb lépéshez tartozó operátort adja vissza, vagyis ahhoz a lépéshez tartozó operátort, amelyik a legnagyobb hasznossági értékkel rendelkező eredményre vezet, feltételezve, hogy az ellenfél úgy játszik, hogy minimalizálja a hasznossági értéket. A <code class="code">MAX-ÉRTÉK</code> és <code class="code">MIN-ÉRTÉK</code> függvények végigmennek a teljes játékfán, le egészen a levélcsomópontokig, hogy meghatározzák a csomópont felfelé terjesztett értékét.</strong></p><div class="figure-contents"><div class="mediaobject"><img src="kepek/06-03.png" alt="Egy algoritmus a minimax döntések kiszámítására. Az algoritmus a lehető legjobb lépéshez tartozó operátort adja vissza, vagyis ahhoz a lépéshez tartozó operátort, amelyik a legnagyobb hasznossági értékkel rendelkező eredményre vezet, feltételezve, hogy az ellenfél úgy játszik, hogy minimalizálja a hasznossági értéket. A MAX-ÉRTÉK és MIN-ÉRTÉK függvények végigmennek a teljes játékfán, le egészen a levélcsomópontokig, hogy meghatározzák a csomópont felfelé terjesztett értékét."/></div></div></div></div><div class="section" title="Optimális döntések többszemélyes játékokban"><div class="titlepage"><div><div><h2 class="title"><a id="id569849"/>Optimális döntések többszemélyes játékokban</h2></div></div></div><p>Számos elterjedt játékban több játékos is részt vehet, nem csupán kettő. Vizsgáljuk meg, hogy a minimax ötletet hogyan terjeszthetjük ki többszemélyes játékok esetére. Technikai szempontból a dolog egyszerű, azonban felmerül néhány érdekes koncepcionális kérdés.</p><p>Először is egy csomópontokhoz rendelt egyetlen értéket egy értékvektorral kell felváltani. Például egy háromszemélyes játékban, ahol három játékos, <span class="emphasis"><em>A</em></span>, <span class="emphasis"><em>B</em></span> és <span class="emphasis"><em>C</em></span> vesz részt, minden csomóponttal egy 〈<span class="emphasis"><em>v<sub>A</sub></em></span>, <span class="emphasis"><em>v<sub>B</sub></em></span>, <span class="emphasis"><em>v<sub>C</sub></em></span>〉 vektort társítunk. Végállapotok esetén ez a vektor megadja az állapot hasznosságát minden játékos szemszögéből (kétszemélyes zérusösszegű játékokban a kételemű vektort egy értékre le lehet egyszerűsíteni, mert az értékek mindig ellentétesek). Ezt a kibővítést legjobb úgy implementálni, hogy a <code class="code">HASZNOSSÁG</code> függvény adja vissza a hasznosságok vektorát.</p><p>Most a nem terminális állapotokkal foglalkozunk. Nézzük meg a 6.4. ábrán látható játékfában az <span class="emphasis"><em>X</em></span> jelzésű csomópontot. Ebben az állapotban a <span class="emphasis"><em>C</em></span> játékos dönti el, hogy mit csináljon. Egyik választása a 〈<span class="emphasis"><em>v<sub>A</sub></em></span> = 1, <span class="emphasis"><em>v<sub>B</sub></em></span> = 2, <span class="emphasis"><em>v<sub>C</sub></em></span> = 6〉, míg a másik a 〈<span class="emphasis"><em>v<sub>A</sub></em></span> = 4, <span class="emphasis"><em>v<sub>B</sub></em></span> = 2, <span class="emphasis"><em>v<sub>C</sub></em></span> = 3〉 vektorokkal rendelkező végállapothoz vezet. Mivel 6 több, mint 3, <span class="emphasis"><em>C</em></span>-nek az első lépést kellene választania. Ez azt jelenti, hogy ha a játék az <span class="emphasis"><em>X</em></span> csomópontot eléri, a következő lépés a 〈<span class="emphasis"><em>v<sub>A</sub></em></span> = 1, <span class="emphasis"><em>v<sub>B</sub></em></span> = 2, <span class="emphasis"><em>v<sub>C</sub></em></span> = 6〉 hasznosságú végállapothoz fog vezetni. <span class="emphasis"><em>X</em></span> visszaadott értéke így ez a vektor. Általánosságban egy <span class="emphasis"><em>n</em></span> csomópont visszaadott értéke annak a követőnek a hasznosságvektora, amely követőnek az <span class="emphasis"><em>n</em></span> csomópontnál választó játékos szempontjából legnagyobb az értéke.</p><div class="figure"><a id="id569972"/><p class="title"><strong>6.4. ábra - Három játékos (<span class="emphasis"><em>A</em></span>, <span class="emphasis"><em>B</em></span>, <span class="emphasis"><em>C</em></span>) játékfája a három első fél lépés esetén. Minden csomópontot az összes játékos szemszegéből számított értékkel címkéztük meg. A legjobb lépést a gyökérnél jelöltük be.</strong></p><div class="figure-contents"><div class="mediaobject"><img src="kepek/06-04.png" alt="Három játékos (A, B, C) játékfája a három első fél lépés esetén. Minden csomópontot az összes játékos szemszegéből számított értékkel címkéztük meg. A legjobb lépést a gyökérnél jelöltük be."/></div></div></div><p>Mindenki, aki olyan többszemélyes játékokat játszik, mint például a Diplomacy<sup>ΤΜ</sup>, gyorsan meggyőződhet, hogy a kétszemélyes játéknál sokkal többről van itt szó. Többszemélyes játékban a játékosok között általában lehetségesek formális vagy informális <span class="strong"><strong>szövetség</strong></span>ek (<span class="strong"><strong>aliance</strong></span>s). A játék előrehaladtával szövetségek köttetnek és bontatnak fel.</p><p>Hogyan is kellene értelmezni egy ilyen viselkedést? Természetes következménye-e a szövetség az egyes játékosok optimális stratégiáinak egy többjátékos játékban? Úgy tűnik, hogy ez igaz lehet. Tegyük fel például, hogy <span class="emphasis"><em>A</em></span> és <span class="emphasis"><em>B</em></span> gyengén, míg <span class="emphasis"><em>C</em></span> erősebben áll. Akkor néha optimális mind <span class="emphasis"><em>A</em></span>, mind <span class="emphasis"><em>B</em></span> számára, ha nem egymást, hanem <span class="emphasis"><em>C</em></span>-t támadják meg, hogy az egyenként ne végezzen velük. Ily módon az együttműködés tisztán egoista viselkedésből is kialakulhat. Persze ahogy az együttes támadásnak kitett <span class="emphasis"><em>C</em></span> gyengül, a szövetség értéke csökken, és vagy <span class="emphasis"><em>A</em></span>, vagy <span class="emphasis"><em>B</em></span> a megegyezést megszegheti. Egyes esetekben az explicit szövetségek az úgyis bekövetkezendő eseményeket rögzítik konkrét módon. Más esetekben szociális megbélyegzés jár a szövetség megszegéséért, így a játékosnak mérlegelnie kell a szövetség megszegésének rövid idejű előnyét és a szavahihetetlenként való megbélyegzés hosszú távú hátrányát. (Az ilyen bonyodalmakról többet a 17.6. alfejezetben.)</p><p>Ha a játék nem zérusösszegű, akkor együttműködés két játékos esetén is létrejöhet. Tegyük fel például, hogy létezik olyan végállapot, amelynek hasznossága 〈<span class="emphasis"><em>v<sub>A</sub></em></span> = 1000, <span class="emphasis"><em>v<sub>B</sub></em></span> = 1000〉, és 1000 mindkét játékos számára az elérendő legnagyobb hasznosság. A két játékos optimális stratégiája akkor az, hogy ennek az állapotnak az elérése érdekében mindent megtesznek – azaz a két játékos automatikusan kooperálni fog, hogy a kölcsönösen előnyös célt elérjék.</p></div></div></body></html>
