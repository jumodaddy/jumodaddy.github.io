<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"/></head><body><div class="section" title="Véletlen elemet is tartalmazó játékok"><div class="titlepage"><div><div><h1 class="title"><a id="id574290"/>Véletlen elemet is tartalmazó játékok</h1></div></div></div><p>A valós életben számos olyan megjósolhatatlan külső eseménnyel van dolgunk, ami miatt előre nem látható helyzetbe kerülünk. Sok játék ezt a megjósolhatatlanságot egy véletlen elem, mint például a kockadobás, bevezetésével veszi figyelembe. Ily módon egy lépéssel közelebb visznek bennünket a valósághoz, és megéri megvizsgálni, hogy ez milyen hatással van a döntési folyamatra.</p><p>Az ostábla tipikusan olyan játék, amely ötvözi a szerencsét és a tudást. A játékosok a lépések előtt kockát dobnak, amivel meghatározzák az adott játékos számára megengedett lépéseket. A 6.10. ábra ostáblaállásánál Fehér egy 6-ost és egy 5-öst dobott, és négy lehetséges lépés közül választhat.</p><div class="figure"><a id="id574298"/><p class="title"><strong>6.10. ábra - Egy tipikus ostáblaállás. A játék lényege, hogy az egyik fél összes bábuját eltávolítsuk a tábláról. Fehér az óramutató járásával egyező irányban halad a 25-ös felé, míg Fekete az óramutató járásával ellentétes irányban, a 0 felé halad. Egy bábuval bármelyik helyre lehet lépni, kivéve azokat a helyeket, ahol az ellenfélnek már legalább két bábuja található. Ha egy olyan helyre lépünk, ahol az ellenfélnek egy bábuja található, akkor azt a bábut elfogtuk, és a lépkedést az elejéről kell újrakezdenie. Ennél a táblaállásnál Fehér épp most dobott 6–5-öt, és négy megengedett lépés közül választhat: (5–10,5–11), (5–11,19–24), (5–10,10–16) és (5–11,11–16).</strong></p><div class="figure-contents"><div class="mediaobject"><img src="kepek/06-10.png" alt="Egy tipikus ostáblaállás. A játék lényege, hogy az egyik fél összes bábuját eltávolítsuk a tábláról. Fehér az óramutató járásával egyező irányban halad a 25-ös felé, míg Fekete az óramutató járásával ellentétes irányban, a 0 felé halad. Egy bábuval bármelyik helyre lehet lépni, kivéve azokat a helyeket, ahol az ellenfélnek már legalább két bábuja található. Ha egy olyan helyre lépünk, ahol az ellenfélnek egy bábuja található, akkor azt a bábut elfogtuk, és a lépkedést az elejéről kell újrakezdenie. Ennél a táblaállásnál Fehér épp most dobott 6–5-öt, és négy megengedett lépés közül választhat: (5–10,5–11), (5–11,19–24), (5–10,10–16) és (5–11,11–16)."/></div></div></div><div class="figure"><a id="id574308"/><p class="title"><strong>6.11. ábra - Egy ostáblaállás sematikus játékfája</strong></p><div class="figure-contents"><div class="mediaobject"><img src="kepek/06-11.png" alt="Egy ostáblaállás sematikus játékfája"/></div></div></div><p>Habár Fehér tudja, hogy számára melyek a megengedett lépések, azt nem tudja, hogy Fekete milyen számokat fog dobni, így nem tudhatja, hogy melyek lesznek Fekete megengedett lépései. Ez azt jelenti, hogy Fehér nem tud egy 3 × 3-as amőbánál látott teljes játékfához hasonlót elkészíteni. Az ostábla esetén a játékfának a <code class="code">MAX</code> és <code class="code">MIN</code> csomópontok mellett tartalmaznia kell <span class="strong"><strong>véletlen csomópont</strong></span>okat <span class="strong"><strong>(chance node</strong></span>s) is. A 6.11. ábrán a véletlen csomópontokat körök jelölik. A véletlen csomópontokból kiinduló ágak a lehetséges kockadobásokat jelölik. Minden ág a dobott értékkel és előfordulásának valószínűségével van felcímkézve. Két kockával történő dobásnál harminchatféle eredményt kaphatunk. Ezek a dobások mind azonos valószínűségűek, mivel azonban a 6–5 megegyezik az 5–6-tal, így csak 21 különböző dobás létezik. A hat dupla (1–1-től egészen 6–6-ig) 1/36-od valószínűséggel, míg a többi 15 különböző dobás 1/18-ad valószínűséggel fordul elő.</p><p>A következő lépés annak megértése, hogyan kell helyes döntéseket hozni. Nyilvánvalóan továbbra is azt a lépést szeretnénk kiválasztani, ami a legjobb álláshoz vezet. A lehetséges állások azonban most nem rendelkeznek egy jól meghatározott minimax értékkel. Ehelyett csak egy átlagos vagy <span class="strong"><strong>várható érték</strong></span>et (<span class="strong"><strong>expected value</strong></span>) tudunk kiszámítani, ahol az átlagolást az összes lehetséges kockadobásra végezzük el. Ezzel a determinisztikus játékok <span class="strong"><strong>minimax érték</strong></span>ét (<span class="strong"><strong>minimax value</strong></span>) a véletlen csomópontokat tartalmazó játékok <span class="strong"><strong>várhatóminimax érték</strong></span>ére (<span class="strong"><strong>expectiminimax value</strong></span>) általánosítottuk. A végállapotok és a <code class="code">MAX</code> és <code class="code">MIN</code> állapotok (ahol a kockadobás eredménye ismert) ugyanúgy viselkednek, mint eddig. A véletlen csomópontok kiértékeléséhez az összes lehetséges kockadobás figyelembevételével számított súlyozott átlagot kell venni, vagyis:</p><p><span class="inlinemediaobject"><img src="kepek/06-02ma.png" alt="Egy ostáblaállás sematikus játékfája"/></span></p><p>ahol a véletlen <span class="emphasis"><em>n</em></span> csomópont állapotátmenet-függvénye az <span class="emphasis"><em>n</em></span> állapotot egyszerűen módosítja az összes kockadobás eredményezte <span class="emphasis"><em>s</em></span> követő állapot értékével és a dobás <span class="emphasis"><em>P</em></span>(<span class="emphasis"><em>s</em></span>) valószínűségével. Ezt az eljárást rekurzívan alkalmazhatjuk a gyökérig, ugyanúgy, mint a minimax esetén. Az algoritmus részleteit feladatnak hagyjuk meg az olvasónak.</p><div class="section" title="Az állás kiértékelése véletlen csomópontokat tartalmazó játékok esetén"><div class="titlepage"><div><div><h2 class="title"><a id="id574402"/>Az állás kiértékelése véletlen csomópontokat tartalmazó játékok esetén</h2></div></div></div><p>Hasonlóan a minimaxhoz, a várhatóminimax esetén is alkalmazhatjuk a nyilvánvaló közelítést, vagyis valamilyen ponton levághatjuk a keresést, és a levelekre egy kiértékelő függvényt alkalmazhatunk. Úgy gondolhatnánk, hogy egy olyan játék esetén, mint az ostábla, a kiértékelő függvény elvben semmiben sem tér el a sakknál alkalmazott kiértékelő függvényektől, melyeknek most is magasabb pontot kell adniuk a jobb állásokra. Valójában azonban a véletlen csomópontok jelenléte azt jelenti, hogy sokkal körültekintőbbnek kell lennünk abban a tekintetben, hogy a kiértékelő függvény értékei mit jelentenek. A 6<span class="emphasis"><em>.</em></span>12. ábra mutatja a problémát: ha a kiértékelő függvény a levelekhez az [1, 2, 3, 4] értékeket rendeli hozzá, az <span class="emphasis"><em>A</em></span><sub>1</sub> lépés lesz a legjobb, az [1, 20, 30, 400] értékekkel az <span class="emphasis"><em>A</em></span><sub>2</sub> lesz a legjobb. Ebből adódóan egy program teljesen másként viselkedik, ha átskálázzuk a kiértékelő függvény értékeket! Kiderül, hogy ha el akarjuk kerülni ezt az érzékenységet, akkor a kiértékelő függvény az egy adott állásból való győzelem valószínűségének (vagy általánosabban az állás várható hasznosságának) csak egy <span class="emphasis"><em>pozitív lineáris transzformációja</em></span> lehet. Ez a bizonytalanságot is tartalmazó helyzetek fontos és általános tulajdonsága. A 16. fejezetben<span class="emphasis"><em> </em></span>tovább foglalkozunk ezzel a kérdéssel.</p></div><div class="section" title="A várhatóminimax komplexitása"><div class="titlepage"><div><div><h2 class="title"><a id="id574431"/>A várhatóminimax komplexitása</h2></div></div></div><p>Ha a program előre tudná a játék folyamán a későbbiekben előforduló összes kockadobás eredményét, akkor egy kockadobást is tartalmazó játék megoldása ugyanolyan lenne, mint egy kockadobást nem tartalmazó játéké, amit a minimax <span class="emphasis"><em>O</em></span>(<span class="emphasis"><em>b<sup>m</sup></em></span>)<span class="emphasis"><em> </em></span>idő alatt tesz meg. Mivel a várhatóminimax figyelembe veszi az összes lehetséges kockadobás-sorozat eredményét is, annak időigénye <span class="emphasis"><em>O</em></span>(<span class="emphasis"><em>b<sup>m</sup>n<sup>m</sup></em></span>) lesz, ahol <span class="emphasis"><em>n</em></span> a különböző dobások számát jelöli.</p><div class="figure"><a id="id574467"/><p class="title"><strong>6.12. ábra - A levélértékeken végrehajtott sorrendőrző transzformáció megváltoztatja a legjobb lépést</strong></p><div class="figure-contents"><div class="mediaobject"><img src="kepek/06-12.png" alt="A levélértékeken végrehajtott sorrendőrző transzformáció megváltoztatja a legjobb lépést"/></div></div></div><p>Még ha a fa mélységkorlátja egy kis értékű <span class="emphasis"><em>d</em></span> is<span class="emphasis"><em>,</em></span> a minimaxhoz képesti többletköltség miatt irreális túl messzire előrenézni a véletlen játékok többségénél. Ostáblánál <span class="emphasis"><em>n</em></span> értéke 21, <span class="emphasis"><em>b</em></span> pedig általában 20 körüli értéket vesz fel, de bizonyos helyzetekben akár 4000 is lehet, a dupla kockadobásoknál. Valószínűleg csak három lépésváltást tudunk kezelni.</p><p>A problémáról másféleképp is gondolkodhatunk: az alfa-béta algoritmus előnye, hogy figyelmen kívül hagyja azokat a későbbi fejleményeket, amelyek a legjobb játék során egyszerűen nem következnek be. Így a valószínű előfordulásokra koncentrál. A kockát használó játékok esetén <span class="emphasis"><em>nem léteznek </em></span>valószínű lépéssorozatok, mivel adott lépések megtételéhez először a kockának kell a megfelelő oldalára esnie, hogy ezek a lépések egyáltalán megengedhetők legyenek. Ez egy általános probléma minden olyan esetben, amikor a bizonytalanság is képbe kerül: a lehetőségek óriási mértékben megsokszorozódnak, és értelmetlenné válik részletes cselekvési terveket kidolgozni, mert a világ valószínűleg nem ezek szerint fog viselkedni.</p><p>Kétségtelen, hogy az olvasónak már eszébe jutott, hogy valami alfa-béta nyeséshez hasonló dolgot a véletlen csomópontokat tartalmazó játékfákra is alkalmazni lehetne. Kiderül, hogy ez valóban lehetséges. A <code class="code">MAX</code> és a <code class="code">MIN</code> csomópontok elemzése változatlan, de egy kis leleményességgel a véletlen csomópontokat is nyeshetjük. Tekintsük a 6.11. ábra <span class="emphasis"><em>C</em></span> véletlen csomópontját, és nézzük meg, mi történik az értékével, amikor a gyermekeit vizsgáljuk és kiértékeljük. Kérdés, hogy lehetséges-e <span class="emphasis"><em>C</em></span> értékére egy felső korlátot találni, még mielőtt az összes gyermekét megvizsgálnánk? (Idézzük vissza, hogy az alfa-béta nyesésnek pontosan erre van szüksége ahhoz, hogy egy csomópontot és az abból kiinduló részfát lenyeshesse.) Ez első pillantásra lehetetlennek tűnhet, mivel a <span class="emphasis"><em>C</em></span> értéke a gyermekei értékének az <span class="emphasis"><em>átlaga,</em></span> és amíg nem láttuk az összes kockadobás eredményét, addig ez az átlag akármi is lehet, mivel a meg nem vizsgált gyermekek akármilyen értéket felvehetnek. Ha azonban a hasznosságfüggvény lehetséges értékeit korlátok közé szorítjuk, akkor korlátokat kaphatunk az átlagra is. Például ha azt mondjuk, hogy a hasznosságértékek +3 és –3 között lehetnek, akkor a levélcsomópontok értékei már korlátosak, és a véletlen csomópont értékére az összes gyermekének megvizsgálása nélkül is <span class="emphasis"><em>adhatunk </em></span>felső korlátot. </p><a id="ID_228_oldal"/></div><div class="section" title="Kártyajátékok"><div class="titlepage"><div><div><h2 class="title"><a id="id574530"/>Kártyajátékok</h2></div></div></div><p>A kártyajátékok sok szempontból érdekesek, nem csupán a szerencsejáték-jellegük miatt. A játékok óriási választékából azokra fogunk összpontosítani, ahol a kártyákat a játék elején véletlen módon osztják szét, és ahol mindegyik játékos által kapott leosztás más játékosok számára nem megfigyelhető. Ilyen játék a bridzs, a whistjáték, a hearts<sup>[<a id="id574536" href="#ftn.id574536" class="footnote">57</a>]</sup><sup> </sup>és a póker néhány formája. </p><p>Az első pillantásra úgy tűnhet, hogy a kártyajátékok pont olyanak, mint a kockadobásos játékok. A kártyákat véletlenül osztjuk szét, és ez meghatározza a játékosok lehetséges lépéseit. Itt azonban az összes kocka a legelején gördül le! Ezt a hasonlatot próbáljuk továbbvinni. Ki fog derülni, hogy ez a gyakorlatban igen hasznos lesz. Mellesleg hibás is, igen érdekes okok miatt.</p><p>Képzeljük el, hogy két játékos, <code class="code">MAX</code> és <code class="code">MIN</code>, négykártyás kétkezes bridzset gyakorol, ahol minden kézleosztás látható. A leosztások az alábbiak, és <code class="code">MAX</code> hív elsőnek:</p><p><code class="code">MAX</code>: ♥ 6 ♦ 6 ♣ 9 8		<code class="code">MIN</code>: ♥ 4 ♠ 2 ♣ 10 5</p><p>Tegyük fel, hogy <code class="code">MAX</code> ♣ 9-et játszik. <code class="code">MIN</code>-nek szint kell játszania, tehát ♣ 10-et vagy ♣ 5-öt. <code class="code">MIN</code> ♣ 10-et játszik és elviszi az ütést. Most <code class="code">MIN</code> következik és ♠ 2-vel indul. <code class="code">MAX</code>-nak nincs pikkje (és így az ütést elvinni nem tudja), következésképpen valamelyik kártyáját le kell játszania. Nyilvánvaló választás a ♦ 6, mert a két másik győztes kártya. Most függetlenül attól, hogy <code class="code">MIN</code> mivel indul a következő ütésben, <code class="code">MAX</code> az utolsó két ütést elviszi, és a játék két-két ütés szinten döntetlen lesz. Könnyű megmutatni a minimax megfelelő változatával (lásd 6.12.<span class="emphasis"><em> </em></span>feladat), hogy <code class="code">MAX</code> ♣ 9-es indulása valójában egy optimális választás.</p><p>Módosítsuk most <code class="code">MIN</code> leosztását, ♥ 4-et ♦ 4-re cserélve:</p><p><code class="code">MAX</code>: ♥ 6 ♦ 6 ♣ 9 8		<code class="code">MIN</code>: ♦ 4 ♠ 2 ♣ 10 5</p><p>A két eset tökéletesen szimmetrikus: a játék lefolyása azonos lesz, kivéve, hogy a második ütésnél <code class="code">MAX</code> a ♥ 6-ot fogja megjátszani. A játék ugyanúgy döntetlen lesz két-két ütéssel, és a ♣ 9 optimális döntés lesz most is.</p><p>Egyelőre minden jónak tűnik. Most rejtsük el <code class="code">MIN</code> kártyáinak egyikét: <code class="code">MAX</code> tudja, hogy <code class="code">MIN</code>-nek vagy az egyik (♥ 4-gyel), vagy a másik (♦ 4-gyel) leosztása van, de fogalma sincs melyik. <code class="code">MAX</code> a következőképpen érvel:</p><p><span class="emphasis"><em>A ♣ 9-es indulás optimális választás <code class="code">MIN</code> első leosztásával szemben és hasonlóan a második leosztásával szemben is, így most is optimálisnak kell lennie, mert tudomásom szerint <code class="code">MIN</code>-nél a két leosztás valamelyike van.</em></span></p><p>Amit <code class="code">MAX</code> használ, azt általánosságban a „jövőbe látás szerinti átlagolásnak” nevezhetnénk. Az ötlet a cselekvés értékelése nem látott kártyák mellett oly módon, hogy először kiszámítunk minimax értékeket minden lehetséges leosztás esetére, majd várható értéket számítunk a leosztásokra nézve, azok valószínűségét felhasználva.</p><p>Ha azt gondolja, hogy ez egy értelmes stratégia (vagy ha nincs véleménye, mert nem érti a bridzset), tekintse a következő történetet:</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p class="List Paragraph">nap: Az <span class="emphasis"><em>A</em></span> út egy halom aranyhoz vezet. A <span class="emphasis"><em>B</em></span> út egy elágazáshoz vezet. Ha az elágazásnál balra fordul, egy ékszerhegyet talál, ha az elágazásnál jobbra fordul, elüti egy busz.</p></li><li class="listitem"><p class="List Paragraph">nap: Az <span class="emphasis"><em>A</em></span> út egy halom aranyhoz vezet. A <span class="emphasis"><em>B</em></span> út egy elágazáshoz vezet. Ha az elágazásnál jobbra fordul, egy ékszerhegyet talál, ha az elágazásnál balra fordul, elüti egy busz.</p></li><li class="listitem"><p class="List Paragraph">nap: Az <span class="emphasis"><em>A</em></span> út egy halom aranyhoz vezet. A <span class="emphasis"><em>B</em></span> út egy elágazáshoz vezet. Ha jól választ, egy ékszerhalmot talál, ha rosszul, elüti egy busz.</p></li></ol></div><p>Nyilvánvaló, nem buta döntés, ha az első két napon a <span class="emphasis"><em>B</em></span> utat választjuk. Nincs olyan épelméjű személy azonban, aki a harmadik napon is maradna <span class="emphasis"><em>B</em></span>-nél. Mégis pontosan ez az, amit a jövőbe látás szerinti átlagolás sugall. A <span class="emphasis"><em>B</em></span> út az 1. nap és a 2. nap helyzetekben optimális, következésképpen optimális a 3. nap szituációban is, hiszen az első két eset egyike fog előfordulni. Térjünk vissza a kártyajátékunkhoz: miután <code class="code">MAX</code> ♣ 9-et hív, <code class="code">MIN</code> ♣ 10-zel győz. <code class="code">MIN</code> ♠ 2-vel indul, mint korábban, és most <code class="code">MAX</code> ott van az elágazásnál bármiféle eligazítás nélkül. Ha <code class="code">MAX</code> a ♥ 6-ot játszotta meg, és <code class="code">MIN</code>-nek van még ♥ 4-e, ♥ 4 lesz a győztes, és <code class="code">MAX</code> a játékot elveszíti. Hasonlóan, ha <code class="code">MAX</code> a ♦ 6-ot játszotta meg, és <code class="code">MIN</code>-nek van még ♦ 4-e, <code class="code">MAX</code> szintén veszteni fog. A ♣ 9 első ízben való hívása tehát olyan helyzethez vezet, ahol <code class="code">MAX</code>-nak 50%-os esélye van a vesztésre (sokkal jobb lenne, ha a ♥ 6-ot vagy a ♦ 6-ot hívná elsőnek, döntetlent biztosítva).</p><p>A leszűrendő lecke az, hogy amikor hiányos az információ, meg kell fontolni, hogy <span class="emphasis"><em>milyen információval fogunk rendelkezni </em></span>a játék minden pillanatában. <code class="code">MAX</code> algoritmusával az a probléma, hogy feltételezi, hogy minden lehetséges leosztásnál a játék úgy folytatódik, mintha <span class="emphasis"><em>minden kártya látható lenne</em></span>. Ahogy a példánk mutatja, ez olyan cselekvésre készteti <code class="code">MAX</code>-ot, mintha minden <span class="emphasis"><em>jövőbeli</em></span> bizonytalanság feloldódna, ha eljön az ideje. <code class="code">MAX</code> algoritmusa sem fog soha <span class="emphasis"><em>információgyűjtéshez</em></span> folyamodni (vagy a partner informálásához), mert egy-egy leosztáson belül erre nincs szüksége. Az olyan játékoknál, mint a bridzs, gyakran értelmes dolog olyan kártyával indulni, amely segíti kideríteni az ellenség leosztását, vagy a partnerünket a saját leosztásunkról informálja. Ilyen viselkedést automatikusan generálhatunk a nem tökéletes információjú játékokra kifejlesztett optimális algoritmussal. Az ilyen algoritmus nem a világállapotok terében (kártyaleosztások), hanem a <span class="strong"><strong>hiedelmi állapot</strong></span>ok terében (<span class="strong"><strong>belief state</strong></span>s) (hiedelmek, hogy kinek milyen kártyája van, milyen valószínűséggel) keres. Az algoritmust a 17. fejezetben tudjuk majd megfelelően elmagyarázni, miután felépítettük a szükséges valószínűségi apparátust. Abban a fejezetben azzal a nagyon fontos szemponttal is fogunk foglalkozni, hogy a nem tökéletes információjú játékokban az a legjobb, ha minél kevesebb információt adunk ki az ellenségnek, és ennek legjobb módszere, ha <span class="emphasis"><em>nem megjósolható</em></span> módon cselekszünk. Ez az oka annak, hogy az étteremellenőrök véletlen módon választják meg az ellenőrzések időpontját.</p></div><div class="footnotes"><br/><hr/><div class="footnote"><p class="footnote text"><sup>[<a id="ftn.id574536" href="#id574536" class="para">57</a>] </sup> Az Angol–magyar Nagyszótár sem segít – ezeknek a játékoknak nincs a mai magyar nyelvben használatos nevük. (<span class="emphasis"><em>A ford.</em></span>)</p></div></div></div></body></html>
