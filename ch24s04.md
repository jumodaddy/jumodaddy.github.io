<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<html xmlns="http://www.w3.org/1999/xhtml"><head><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"/></head><body><div class="section" title="D információ kinyerése"><div class="titlepage"><div><div><h1 class="title"><a id="id783062"/>D információ kinyerése</h1></div></div></div><p>Ebben az alfejezetben azt mutatjuk meg, hogyan kell a kétdimenziós képből kiindulva a jelenet háromdimenziós reprezentációjáig eljutni. Fontos, hogy a jelenettel foglalkozzunk, hiszen végső soron az ágens a világban létezik, nem a képsíkon, a látás célja pedig annak elérése, hogy az ágens a világ objektumaival együttműködjön. Mindazonáltal az ágensek többségének csak a jelenet egyes aspektusainak korlátozott absztrakt reprezentációjára van szüksége, nem minden részletre. A könyv hátralevő részében látható, a világgal foglalkozó algoritmusok az objektumok tömör leírására építenek, nem minden háromdimenziós felületdarabka kimerítően teljes számbavételére.</p><p>Elsőként az <span class="strong"><strong>objektumfelismerés</strong></span>t (<span class="strong"><strong>object recognition</strong></span>) tárgyaljuk, azt a folyamatot, amely során a képek jellemzői (mint például az élek) átalakulnak ismert objektumok (mint például a tűzőgépek) modelljeivé. Az objektumfelismerés három lépésből áll: a jelenet szegmentálása különálló objektumokra, mindegyik objektum pozíciójának és térbeli orientációjának a megfigyelőhöz képesti meghatározása, valamint mindegyik objektum alakjának a meghatározása.</p><p>A manipulálási és a navigálási feladatok szempontjából legfontosabb az objektum pozíciójának és térbeli orientációjának (az objektum ún. <span class="strong"><strong>helyzet</strong></span>ének – <span class="strong"><strong>pose</strong></span>) a meghatározása a megfigyelőhöz képest. Ahhoz, hogy egy nyüzsgő gyárban eligazodjunk, tudnunk kell az akadályok elhelyezkedését, mert akkor egy olyan pályát tudunk tervezni, amely az akadályokat kikerüli. Ha egy tárgyat szeretnénk felvenni és kézben tartani, a kézhez képesti helyzetet kell ismernünk, mert csak így tudjuk generálni a megfelelő pályájú cselekvésszekvenciát. A manipulálást és a navigálást tipikusan szabályozási hurokban oldjuk meg – az érzékelők információja visszacsatolást jelent, amivel a robot vagy a robotkar mozgását befolyásolni tudjuk.</p><p>Használjunk most matematikai jelölést a pozíció és az orientáció leírására. A jelenet egy <span class="emphasis"><em>P</em></span> pontjának a pozícióját három szám jellemzi, a <span class="emphasis"><em>P</em></span> pont (<span class="emphasis"><em>X</em></span>, <span class="emphasis"><em>Y</em></span>, <span class="emphasis"><em>Z</em></span>) koordinátái a sötétkamra nyílásában elhelyezett origójú és az optikai tengellyel parallel <span class="emphasis"><em>Z</em></span> tengelyű koordináta-rendszerben (lásd 24.1. ábra). Amivel rendelkezünk, az a kép egy pontjának (<span class="emphasis"><em>x</em></span>, <span class="emphasis"><em>y</em></span>) perspektivikus vetülete. Ez egyben a fénysugarat is definiálja a nyílás felől, amely mentén valahol elhelyezkedik a <span class="emphasis"><em>P</em></span> pont. A <span class="emphasis"><em>P</em></span> pont távolságát azonban nem ismerjük. Az „orientáció” fogalmát kétféle értelemben lehet használni:</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p><span class="strong"><strong>Az objektum egészének az orientációja</strong></span>. Ezt egy háromdimenziós forgatási függvényben specifikálhatjuk, az objektum koordináta-rendszerét a kameráéhoz viszonyítva.</p></li><li class="listitem"><p><span class="strong"><strong>Az objektum felületének az orientációja a P</strong></span><span class="strong"><strong> pontban</strong></span>. Ez egy <span class="strong"><strong>n</strong></span> normál vektorral adható meg, amely a felületre merőleges irányt határozza meg. A felület orientációját sokszor a <span class="strong"><strong>lejtés</strong></span>sel (<span class="strong"><strong>slant</strong></span>) és a <span class="strong"><strong>dőlés</strong></span>sel (<span class="strong"><strong>tilt</strong></span>) fejezzük ki. A dőlés az <span class="strong"><strong>n</strong></span> és a <span class="emphasis"><em>Z</em></span> tengely által bezárt szög. A lejtés az <span class="emphasis"><em>X</em></span> tengely és az <span class="strong"><strong>n</strong></span> képsíkra vett vetülete által bezárt szög.</p></li></ol></div><p>Amikor a kamera a tárgyhoz képest elmozdul, az objektumnak mind a távolsága, mind az orientációja megváltozik. Ami viszont nem fog változni, az a tárgy <span class="strong"><strong>alak</strong></span>ja (<span class="strong"><strong>shape</strong></span>). Ha a tárgy pl. egy kocka, akkor a kocka jellege nem változik, ha a tárgy mozog. A geometria kutatói századok óta próbálkoznak az alak fogalmának formalizálásával – abból az alapötletből kiindulva, hogy az alak az a valami, ami bizonyos transzformációcsoport – pl. a forgatások és a transzlációk kombinációi – hatására nem változik. A nehézség abban rejlik, hogy hogyan keressük meg a globális alak egy olyan reprezentációját, amely elegendően általános ahhoz, hogy a valódi világ alakbeli változékonyságát – és nem csupán oly egyszerű formákat, mint a hengerek, a kúpok és a gömbök – lefedje, és mégis könnyen kinyerhető legyen a vizuális bemenetből. A felület <span class="emphasis"><em>lokális</em></span> alakjának a jellemzése sokkal jobban feltárt. Ez lényegében a görbülettel lehetséges – azaz azzal, hogy hogyan változik a felület normálisa, ha a felületen különböző irányokba elmozdulunk. A sík esetén egyáltalán nincs változás. A henger esetén sincs, ha a tengely mentén haladunk, a rá merőleges irányban azonban a normális, a henger sugarával fordítottan arányos ütemben forog. Ezekkel a kérdésekkel a differenciálgeometria foglalkozik.</p><p>A tárgy alakja bizonyos manipulációs feladatok szempontjából fontos, pl. ahhoz, hogy eldöntsük, hogy a tárgyat hol fogjuk meg. Legfontosabb szerepe azonban a tárgyak felismerésében van, ahol a geometriai alak a színnel és a textúrával egyetemben a legjellemzőbb vonást jelenti, hogy a tárgyakat azonosíthassuk, a kép tartalmát a korábban látott osztályokba besoroljuk és így tovább.</p><p>Az alapvető probléma a következő: ha egyszer a perspektivikus vetítés alatt a háromdimenziós világ egy pontból kiinduló sugár mentén található minden pontja a képnek ugyanabba a pontjába vetítődött, hogyan nyerjük vissza a háromdimenziós információt? A vizuális érzékelésben ehhez számos segítő dolog áll rendelkezésre, a <span class="strong"><strong>mozgás</strong></span>t, a <span class="strong"><strong>sztereolátás</strong></span>t, a <span class="strong"><strong>textúrá</strong></span>t, az <span class="strong"><strong>árnyalás</strong></span>t és a <span class="strong"><strong>kontúrok</strong></span>at beleértve. Ezek mindegyike, ahhoz hogy a kép értelmezését (közel) egyértelmű módon megoldhassa, a jelenetre vonatkozó háttér-feltételezéseken alapul. Az alábbiakban ezekkel a módszerekkel foglalkozunk.</p><div class="section" title="A mozgás"><div class="titlepage"><div><div><h2 class="title"><a id="id783238"/>A mozgás</h2></div></div></div><p>Eddig egy időpontban csak egy képpel foglalkoztunk. A videokamerák azonban másodpercenként 30 képkockát rögzítenek, és a kockák közötti különbségek fontos információk forrásai lehetnek. Abban az esetben, ha a kamera a háromdimenziós jelenethez képest mozog, a képen keletkező látszólagos mozgást <span class="strong"><strong>optikai folyam</strong></span>nak (<span class="strong"><strong>optical flow</strong></span>) nevezzük. A folyam a<span class="emphasis"><em> képbeli</em></span> jellegzetességek mozgásirányát és mozgási sebességét írja le, amit a jelenet és a megfigyelő egymáshoz viszonyított relatív mozgásának következtében kapunk. A 24.7. (a) és (b) ábrán egy forgó Rubik-kockát ábrázoló videofelvételből látunk két filmkockát. A (c) képen<span class="emphasis"><em> </em></span>az előbbi képekből számított optikai folyam vektorai láthatók. Az optikai folyam a jelenet struktúrájára nézve tartalmaz hasznos információt. Például egy mozgó kocsiból kinézve a távoli tárgyaknak sokkal lassúbb a látszólagos mozgása, mint a közelieknek, így a látszólagos mozgás üteme a távolságról is hordoz valamiféle információt.</p><p>Az optikai folyam vektormezeje az <span class="emphasis"><em>x</em></span> irányú <span class="emphasis"><em>v<sub>x</sub></em></span>(<span class="emphasis"><em>x</em></span>, <span class="emphasis"><em>y</em></span>) és az <span class="emphasis"><em>y </em></span>irányú <span class="emphasis"><em>v<sub>y</sub></em></span>(<span class="emphasis"><em>x</em></span>, <span class="emphasis"><em>y</em></span>) komponensekkel jellemezhető. Ahhoz, hogy az optikai folyamot megmérhessük, meg kell találni az egymásnak megfelelő pontokat a szomszédos képkockákon. Ehhez azt a tényt használjuk fel, hogy az egymásnak megfelelő pontok körüli képrészeknek hasonló a fényességmintázata. Tekintsük a <span class="emphasis"><em>p</em></span>, (<span class="emphasis"><em>x</em></span><sub>0</sub>, <span class="emphasis"><em>y</em></span><sub>0</sub>) képpont körül <span class="emphasis"><em>t</em></span><sub>0</sub> időpillanatban csoportosuló képponttömböt. Ezt a tömböt a <span class="emphasis"><em>t</em></span><sub>0</sub> +<span class="emphasis"><em> D<sub>t</sub></em></span> időpillanatban a különböző (<span class="emphasis"><em>x</em></span><sub>0</sub><span class="emphasis"><em> + D<sub>x</sub></em></span>, <span class="emphasis"><em>y</em></span><sub>0</sub><span class="emphasis"><em> + D<sub>y</sub></em></span>) pozíciójú <span class="emphasis"><em>q<sub>i</sub></em></span> képpontjelöltek körül csoportosuló képponttömbökkel össze kell hasonlítani. A hasonlóság egyik szóba jöhető mértéke a <span class="strong"><strong>különbségek négyzetösszege</strong></span> (<span class="strong"><strong>sum of squared differences</strong></span>, <span class="strong"><strong>SSD</strong></span>):</p><p><span class="inlinemediaobject"><img src="math/mi-24-0007.gif" alt="A mozgás"/></span></p><div class="figure"><a id="id783382"/><p class="title"><strong>24.7. ábra - (a) Rubik-kocka egy forgó lemezkorongon. (b) Ugyanaz a kocka 19/30 másodperccel később (Richard Szeliski nyomán). (c) Az (a) és (b) képek összehasonlítása alapján számolt optikai folyam vektorok (Joe Weber és Jitendra Malik hozzájárulásával).</strong></p><div class="figure-contents"><div class="mediaobject"><img src="kepek/24-07.png" alt="(a) Rubik-kocka egy forgó lemezkorongon. (b) Ugyanaz a kocka 19/30 másodperccel később (Richard Szeliski nyomán). (c) Az (a) és (b) képek összehasonlítása alapján számolt optikai folyam vektorok (Joe Weber és Jitendra Malik hozzájárulásával)."/></div></div></div><p>Az (<span class="emphasis"><em>x</em></span>, <span class="emphasis"><em>y</em></span>) az (<span class="emphasis"><em>x</em></span><sub>0<span class="emphasis"><em> </em></span></sub>, <span class="emphasis"><em>y</em></span><sub>0</sub>) képpont körüli tömb képpontjainak halmazán fut végig. Megkeressük most azt a (<span class="emphasis"><em>D<sub>x</sub></em></span>,<span class="emphasis"><em>  D<sub>y</sub></em></span>)-t, amely az SSD-t minimizálja. Az (<span class="emphasis"><em>x</em></span><sub>0<span class="emphasis"><em> </em></span></sub>, <span class="emphasis"><em>y</em></span><sub>0</sub>)-beli optikai folyam ilyenkor: (<span class="emphasis"><em>v<sub>x </sub></em></span>, <span class="emphasis"><em>v<sub>y</sub></em></span>) = (<span class="emphasis"><em>D<sub>x</sub>/D<sub>t</sub></em></span>, <span class="emphasis"><em>D<sub>y</sub>/D<sub>t</sub></em></span>). Alternatívaként maximalizálhatjuk a <span class="strong"><strong>keresztkorrel</strong></span><span class="strong"><strong>áció</strong></span>t (<span class="strong"><strong>cross-correlation</strong></span>):</p><p><span class="inlinemediaobject"><img src="math/mi-24-0008.gif" alt="(a) Rubik-kocka egy forgó lemezkorongon. (b) Ugyanaz a kocka 19/30 másodperccel később (Richard Szeliski nyomán). (c) Az (a) és (b) képek összehasonlítása alapján számolt optikai folyam vektorok (Joe Weber és Jitendra Malik hozzájárulásával)."/></span></p><p>A keresztkorreláció akkor használható a legjobban, ha a jelenet képében textúra található, mert ekkor a vizsgált ablakokban nagy a fényességváltozás a képpontok mentén. Ha egy egyenletesen fehér falra nézünk, a különböző <span class="emphasis"><em>q</em></span> jelöltekre számított keresztkorreláció majdnem azonos lesz, és az algoritmus a gyakorlatban véletlenszerűen fog választani.</p><p>Tegyük fel, hogy a megfigyelő <span class="strong"><strong>T</strong></span> transzlációs és  szögsebességgel rendelkezik [amelyek így a <span class="strong"><strong>sajátmozgás</strong></span>t (<span class="strong"><strong>egomotion</strong></span>) írják le]. Származtatni lehet olyan összefüggéseket, amelyek a megfigyelő sebességét, az optikai folyamot és a jelenet tárgyainak a pozícióját kapcsolják össze. Tegyük fel, hogy <span class="emphasis"><em>f = 1</em></span>, akkor:</p><p><span class="inlinemediaobject"><img src="math/mi-24-0009.gif" alt="(a) Rubik-kocka egy forgó lemezkorongon. (b) Ugyanaz a kocka 19/30 másodperccel később (Richard Szeliski nyomán). (c) Az (a) és (b) képek összehasonlítása alapján számolt optikai folyam vektorok (Joe Weber és Jitendra Malik hozzájárulásával)."/></span></p><p>ahol Z(<span class="emphasis"><em>x</em></span>, <span class="emphasis"><em>y</em></span>) az (<span class="emphasis"><em>x</em></span>, <span class="emphasis"><em>y</em></span>) képponthoz tartozó jelenetbeli pontnak a <span class="emphasis"><em>z</em></span> koordinátája.</p><p>A képlet jobb megértését szolgálja, ha az egyszerű transzláció esetét nézzük. Ebben az esetben a folyammező:</p><p><span class="inlinemediaobject"><img src="math/mi-24-0010.gif" alt="(a) Rubik-kocka egy forgó lemezkorongon. (b) Ugyanaz a kocka 19/30 másodperccel később (Richard Szeliski nyomán). (c) Az (a) és (b) képek összehasonlítása alapján számolt optikai folyam vektorok (Joe Weber és Jitendra Malik hozzájárulásával)."/></span></p><p>lesz. Néhány érdekes tulajdonságot figyelhetünk meg. Az optikai folyam mindkét komponense, <span class="emphasis"><em>v<sub>x</sub></em></span>(<span class="emphasis"><em>x</em></span>, <span class="emphasis"><em>y</em></span>) és <span class="emphasis"><em>v<sub>y</sub></em></span>(<span class="emphasis"><em>x</em></span>, <span class="emphasis"><em>y</em></span>) is zérus az <span class="emphasis"><em>x = T<sub>x</sub>/T<sub>z</sub></em></span>, <span class="emphasis"><em>y</em></span> = <span class="emphasis"><em>T<sub>y</sub>/T<sub>z</sub></em></span> pontban. Ezt a pontot a folyammező <span class="strong"><strong>expanziófókusz</strong></span>ának (<span class="strong"><strong>focus of expansion</strong></span>) nevezzük. Tegyük fel, hogy az <span class="emphasis"><em>x – y</em></span> sík origóját az expanziófókuszba helyezzük át. Ilyenkor az optikai folyam kifejezései igen egyszerű formát öltenek. Jelölje (<span class="emphasis"><em>x'</em></span>, <span class="emphasis"><em>y'</em></span>) az <span class="emphasis"><em>x' = x – T<sub>x </sub>/T<sub>z</sub></em></span>, és az <span class="emphasis"><em>y' = y</em></span> – <span class="emphasis"><em>T</em></span><sub><span class="emphasis"><em>y</em></span> </sub>/<span class="emphasis"><em>T<sub>z</sub></em></span> által definiált új koordinátákat. Ekkor:</p><p><span class="inlinemediaobject"><img src="math/mi-24-0011.gif" alt="(a) Rubik-kocka egy forgó lemezkorongon. (b) Ugyanaz a kocka 19/30 másodperccel később (Richard Szeliski nyomán). (c) Az (a) és (b) képek összehasonlítása alapján számolt optikai folyam vektorok (Joe Weber és Jitendra Malik hozzájárulásával)."/></span></p><p>Ennek az egyenletnek van néhány érdekes alkalmazása. Tegyük fel, hogy ön egy légy, amely egy falra próbál leszállni, és azt szeretné tudni, hogy adott aktuális sebesség mellett mennyi idő múlva ér a falhoz. Ezt az időt a <span class="emphasis"><em>Z/T<sub>z</sub></em></span> adja meg. Figyeljük meg, hogy annak ellenére, hogy a pillanatnyi optikai folyam nem képes sem a <span class="emphasis"><em>Z</em></span> távolságot, sem a <span class="emphasis"><em>T<sub>z</sub></em></span> sebességi komponenst megadni, a kettő arányát meg tudja adni, és így a leszállás irányításában felhasználható. Az élő legyekkel való kísérletek alátámasztják, hogy a legyek pontosan ezt a mechanizmust használjak. A legyek a legmerészebb repülők az állatok és gépek között, és érdekes, hogy ezt egy olyan látórendszerrel teszik, amelynek borzasztóan gyenge a térbeli felbontása (körülbelül 600 érzékelője van, összehasonlítva az emberek 100 milliójával), de kiemelkedő az időbeli felbontása.</p><div class="figure"><a id="id783687"/><p class="title"><strong>24.8. ábra - (a) Egy olyan videokép-sorozat négy kockája, amelyben a kamera a tárgyhoz képest mozgott és forgott. (b) A sorozat első képkockája, amelyen apró négyzetek jelzik a tulajdonságfelismerő által megtalált tulajdonságokat (Carlo Tomasi hozzájárulásával).</strong></p><div class="figure-contents"><div class="mediaobject"><img src="kepek/24-08.png" alt="(a) Egy olyan videokép-sorozat négy kockája, amelyben a kamera a tárgyhoz képest mozgott és forgott. (b) A sorozat első képkockája, amelyen apró négyzetek jelzik a tulajdonságfelismerő által megtalált tulajdonságokat (Carlo Tomasi hozzájárulásával)."/></div></div></div><div class="figure"><a id="id783696"/><p class="title"><strong>24.9. ábra - (a) A 24.8. ábrán látható kép tulajdonságai elhelyezkedésének háromdimenziós rekonstrukciója. (b) A valódi ház ugyanabból a perspektívából.</strong></p><div class="figure-contents"><div class="mediaobject"><img src="kepek/24-09.png" alt="(a) A 24.8. ábrán látható kép tulajdonságai elhelyezkedésének háromdimenziós rekonstrukciója. (b) A valódi ház ugyanabból a perspektívából."/></div></div></div><p>A mélység kiszámításához több képkocka használata szükséges. Ha a filmre egy merev testet veszünk fel, akkor ennek alakja képkockáról képkockára nem fog változni, és így az optikai folyam természeténél fogva zajos méréseit jobban kezelhetjük. Az egyik ilyen megközelítés eredményét a 24.8. és a 24.9. ábrán láthatjuk (Tomasi és Kanade, 1992).</p></div><div class="section" title="Kétkamerás (binokuláris) térbeli látás"><div class="titlepage"><div><div><h2 class="title"><a id="id783708"/>Kétkamerás (binokuláris) térbeli látás</h2></div></div></div><p>A legtöbb gerincesnek <span class="emphasis"><em>két</em></span> szeme van. Ez hasznos redundancia arra az esetre, ha elveszítené az egyiket, de más módon is segít. A legtöbb zsákmányállatnak a feje oldalán vannak a szemei, hogy nagyobb területet beláthasson. A ragadozóknak elöl, hogy <span class="strong"><strong>kétkamerás térbeli látás</strong></span>t (<span class="strong"><strong>binocular stereopsis</strong></span>) valósíthassanak meg. Maga a gondolat a mozgási parallaxisra igen hasonlít, azonban az eltérő időpontokhoz tartozó képek helyett két (vagy több), térben szeparált képet használunk, hasonlóan ahhoz, mint amilyeneket pl. az előrenéző emberi szemek szolgáltatnak. Tekintettel arra, hogy a jelenet egy adott jellemzője az egyes képsíkok <span class="emphasis"><em>z</em></span> koordinátájához képest más helyen lesz a képen, ha a két képet egymásra fektetjük, a képjellemző elhelyezkedésében a két kép különbséget – <span class="strong"><strong>diszparitás</strong></span>t (<span class="strong"><strong>disparity</strong></span>) – fog mutatni. Ez látszik a 24.10. ábrán, ahol a piramis legközelebbi pontja balra mozdult el a jobb oldali képen, és jobbra a bal oldalin.</p><div class="figure"><a id="id783742"/><p class="title"><strong>24. ábra - A térbeli látás alapgondolata: különböző kamerapozíciók ugyanannak a háromdimenziós jelenetnek kissé eltérő kétdimenziós nézeteit eredményezik</strong></p><div class="figure-contents"><div class="mediaobject"><img src="kepek/24-10.png" alt="A térbeli látás alapgondolata: különböző kamerapozíciók ugyanannak a háromdimenziós jelenetnek kissé eltérő kétdimenziós nézeteit eredményezik"/></div></div></div><div class="figure"><a id="id783752"/><p class="title"><strong>24.11. ábra - A diszparitás és a mélység összefüggése a sztereolátásban</strong></p><div class="figure-contents"><div class="mediaobject"><img src="kepek/24-11.png" alt="A diszparitás és a mélység összefüggése a sztereolátásban"/></div></div></div><p>Dolgozzuk ki a diszparitás és a mélység geometriai kapcsolatát. Először azt az esetet vizsgáljuk meg, amikor a két szem (illetve a két kamera) előrenéz, és optikai tengelyük párhuzamos. A jobb és a bal kamera kapcsolata így egy <span class="emphasis"><em>b</em></span> nagyságú (bázisvonal) transzláció az <span class="emphasis"><em>x</em></span> koordináta-tengely mentén. A <span class="emphasis"><em>H = v<sub>x</sub></em></span> ∆<span class="emphasis"><em>t</em></span> vízszintes és <span class="emphasis"><em>V = v<sub>y</sub></em></span>∆<span class="emphasis"><em>t </em></span>függőleges képeltérés számításához az optikai folyam előbb megismert kifejezéseit használhatjuk, <span class="emphasis"><em>T<sub>x</sub> = b/</em></span>∆<span class="emphasis"><em>t</em></span>,<span class="emphasis"><em> T<sub>y</sub> = T<sub>z</sub> = </em></span>0 mellett. Az <span class="emphasis"><em>ω<sub>x</sub></em></span>, <span class="emphasis"><em>ω<sub>y</sub></em></span>, és <span class="emphasis"><em>ω<sub>z</sub></em></span> rotációs paraméterek zérusok. Azt kapjuk eredményül, hogy <span class="emphasis"><em>H</em></span> = <span class="emphasis"><em>b/Z</em></span> és <span class="emphasis"><em>V = </em></span>0. Szavakkal megfogalmazva ez azt jelenti, hogy a vízszintes képeltérés a bázisvonal és a mélység aránya, a függőleges eltérés pedig zérus.</p><p>Normális látási körülmények között az emberek <span class="strong"><strong>fixál</strong></span>nak, azaz <span class="strong"><strong>összetartóan néznek előre </strong></span>(<span class="strong"><strong>fixate</strong></span>), vagyis a jelenetben létezik egy olyan pont, amelyben a két optikai tengely metszi egymást. A 24.11. ábra egy <span class="emphasis"><em>P</em></span><sub>0</sub> pontra fixáló szemeket mutat, amely pont a két szem középvonalától <span class="emphasis"><em>Z</em></span> távolságban helyezkedik el. Az egyszerűség kedvéért <span class="emphasis"><em>szögeltérést</em></span> fogunk számítani radiánban. Az összetartás <span class="emphasis"><em>P</em></span><sub>0 </sub>pontjában az eltérés zérus. A jelenet egy <span class="emphasis"><em>δZ</em></span>-vel távolabbi <span class="emphasis"><em>P</em></span> pontja esetén számíthatjuk a <span class="emphasis"><em>P<sub> </sub></em></span>pont <span class="emphasis"><em>P<sub>L</sub></em></span> bal és a  <span class="emphasis"><em>P<sub>R </sub></em></span>jobb oldali képének a szögeltolódását. Ha azok mindegyike a <span class="emphasis"><em>P</em></span><sub>0 </sub>-hoz képest <span class="emphasis"><em>δθ/2</em></span> szöggel eltolt, akkor a <span class="emphasis"><em>P<sub>L</sub></em></span> és a <span class="emphasis"><em>P<sub>R</sub></em></span> eltolódása, ami a <span class="emphasis"><em>P</em></span> képeltérése, pontosan <span class="emphasis"><em>δθ</em></span>. Egyszerű geometriai átalakításokból azt fogjuk kapni, hogy:</p><p><span class="inlinemediaobject"><img src="math/mi-24-0012.gif" alt="A diszparitás és a mélység összefüggése a sztereolátásban"/></span></p><p>Embereknél a <span class="emphasis"><em>b</em></span> <span class="strong"><strong>bázisvonal</strong></span> (<span class="strong"><strong>baseline</strong></span>) kb. 6 cm. Tegyük fel, hogy <span class="emphasis"><em>Z</em></span> kb. 100 cm. A legkisebb detektálható <span class="emphasis"><em>δθ</em></span> (ami a képpont nagyságával függ össze) kb. 5 szögmásodperc, avagy 2,42  × 10<sup>–5</sup> radián, amiből a <span class="emphasis"><em>δZ </em></span>0,4 mm-re adódik. <span class="emphasis"><em>Z</em></span> = 30 cm-re <span class="emphasis"><em>δZ = </em></span>0,036 mm-es lenyűgöző értéket kapunk. Ez azt jelenti, hogy 30 cm-es távolságban az emberek akár a 0,036 mm-es képmélység különbség megkülönböztetésére is képesek. Ez teszi lehetővé, hogy be tudjuk fűzni a cérnát egy tűbe, és hasonló műveleteket tudunk elvégezni.</p></div><div class="section" title="Textúragradiensek"><div class="titlepage"><div><div><h2 class="title"><a id="id783977"/>Textúragradiensek</h2></div></div></div><p>A mindennapi nyelvben a <span class="strong"><strong>textúra</strong></span> vagy <span class="strong"><strong>felületmintázat</strong></span> (<span class="strong"><strong>texture</strong></span>) a felület kitapintható tulajdonságaira vonatkozik (az angol nyelvben ugyanazzal a szótővel rendelkezik, mint maga a szövet<sup>[<a id="id783998" href="#ftn.id783998" class="footnote">272</a>]</sup>). A számítógépes látásban a textúra egy ehhez közeli fogalomra, egy felületnek a síkban ismétlődő, vizuálisan érzékelhető mintázatára vonatkozik. Példaként említhetjük egy épület ablakainak a mintázatát, egy szvetter kötési mintáját, a leopárd foltos bundáját, a pázsit fűszálainak a mintázatát, kavicsokat a strandon vagy embertömeget egy stadionban. Az elrendezés néha közel periodikus, mint például a kötési szemek a szvetteren, más esetekben, mint például a strandon lévő kavicsok esetén, a szabályosság csak statisztikai értelemben létezik – a kavicsok sűrűsége a strand különböző részein nagyjából azonos.</p><div class="figure"><a id="id784007"/><p class="title"><strong>24.12. ábra - (a) A textúragradienseket illusztráló jelenet. Feltéve, hogy a valós mintázat egyforma, lehetővé teszi a felület irányágának a meghatározását. A számított irányt a képen oly módon elhelyezett fehér kör és nyíl jelzi, mintha a kört a felületre festették volna abban a pontban. (b) Egy ívelt felület alakjának meghatározása a mintázat alapján. (A képeket Jitendra Malik és Ruth Rosenholtz hozzájárulásával közöljük [Malik és Rosenholtz, 1994].)</strong></p><div class="figure-contents"><div class="mediaobject"><img src="kepek/24-12.png" alt="(a) A textúragradienseket illusztráló jelenet. Feltéve, hogy a valós mintázat egyforma, lehetővé teszi a felület irányágának a meghatározását. A számított irányt a képen oly módon elhelyezett fehér kör és nyíl jelzi, mintha a kört a felületre festették volna abban a pontban. (b) Egy ívelt felület alakjának meghatározása a mintázat alapján. (A képeket Jitendra Malik és Ruth Rosenholtz hozzájárulásával közöljük [Malik és Rosenholtz, 1994].)"/></div></div></div><p>Amit most a <span class="emphasis"><em>jelenetre</em></span> vonatkozóan állítottunk, igaz. A képen a textúraelemek vagy <span class="strong"><strong>t</strong></span><span class="strong"><strong>exel</strong></span>ek (<span class="strong"><strong>texel</strong></span>s) látszólagos nagysága, alakja, távolsága stb. igencsak változik, ahogy ezt a 24.12. ábra mutatja. A csempelapok a jeleneten azonosak. A lapok kivetített nagyságának és alakjának megváltozásában két fő ok játszik szerepet:</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p><span class="emphasis"><em>Az egyes texeleknek a kamerától vett változó távolsága</em></span>. Emlékezzünk arra, hogy a perspektivikus vetítésben a távoli tárgyak kisebbnek tűnnek. A skálatényező 1/<span class="emphasis"><em>Z</em></span>.</p></li><li class="listitem"><p><span class="emphasis"><em>Az egyes texelek változó rövidülése</em></span>. Ez a texeleknek a kamerából kiinduló rálátási irányhoz viszonyított orientációján múlik. Rövidülés nincs, ha a texel a rálátási irányra merőleges. A rövidülés mértéke cos <span class="emphasis"><em>σ</em></span>-val arányos, ahol a <span class="emphasis"><em>σ</em></span> a texel síkjának a lejtése.</p></li></ol></div><p>Egy kevés matematikai elemzést követően meghatározhatjuk a különböző texeltulajdonságok, mint pl. a terület, a rövidülés és a sűrűség változási mértékének kifejezéseit. Ezek az ún. <span class="strong"><strong>textúragradiensek</strong></span> (<span class="strong"><strong>texture gradients</strong></span>) a felület alakjának és a megfigyelőhöz képesti dőlésének és lejtésének a függvényei.</p><p>Ahhoz, hogy az alakot a textúrából kinyerhessük, kétlépcsős eljáráshoz kell folyamodnunk: (a) először mérjük a textúragradienseket; (b) majd becsüljük a mért gradienseket okozni látszó felületalakot, azok dőlését és lejtését. A 24.12. ábra mutatja ezen eljárás eredményeit.</p></div><div class="section" title="Árnyalás"><div class="titlepage"><div><div><h2 class="title"><a id="id784078"/>Árnyalás</h2></div></div></div><p>Az <span class="strong"><strong>árnyalás</strong></span>t (<span class="strong"><strong>shading</strong></span>) – a jelenethez tartozó felület különböző részeiről kapott megvilágítás intenzitásváltozását – a jelenet geometriája és a felület-visszaverési tulajdonságai határozzák meg. A számítógépes grafikában a feladat a kép <span class="emphasis"><em>I</em></span>(<span class="emphasis"><em>x</em></span>,<span class="emphasis"><em>y</em></span>) fényességfüggvényének a megadása, ha a jelenet geometriája és a visszaverődési tulajdonságok adottak. A számítógépes látásban azt reméljük, hogy ez a folyamat invertálható, vagyis visszaállíthatjuk a jelenet geometriáját és visszaverődési tulajdonságait, ha az <span class="emphasis"><em>I</em></span>(<span class="emphasis"><em>x</em></span>,<span class="emphasis"><em>y</em></span>) képfényesség adott. A probléma olyan nehéznek bizonyult, hogy a legegyszerűbb esetektől eltekintve e téren nem sikerült eredményeket elérni.</p><p>Induljunk ki egy olyan példából, ahol az alakot tényleg visszanyerhetjük az árnyalásból. Tekintsünk egy Lambert-féle felületet, amit egy távoli, pontszerű fényforrás világít meg. Tételezzük fel azt is, hogy a felület messze van a kamerától, így függőleges síkú vetítést fogunk használni a perspektivikus vetítés megközelítésére. A kép fényessége:</p><p><code class="code"><em><span class="remark">I</span></em>(<em><span class="remark">x</span></em>,<em><span class="remark"> y</span></em>) = <em><span class="remark">k</span></em><em><span class="remark">n</span></em>(<em><span class="remark">x</span></em>,<em><span class="remark"> y</span></em>)<em><span class="remark"> </span></em>·<em><span class="remark"> </span></em><em><span class="remark">s</span></em></code></p><p>ahol <span class="emphasis"><em>k</em></span> egy skálaegyüttható, <span class="strong"><strong>n</strong></span> a felület normál egységvektora és <span class="strong"><strong>s</strong></span> a fényforrás irányába mutató egységvektor. Mivel <span class="strong"><strong>n</strong></span> és <span class="strong"><strong>s</strong></span> egységvektorok, skalárszorzatuk a kettő közötti szög koszinusza. A felület alakját az <span class="strong"><strong>n</strong></span> felület menti változása tartalmazza. Tételezzük fel, hogy <span class="emphasis"><em>k</em></span> és <span class="strong"><strong>s</strong></span> ismertek. A problémánk most a felület <span class="strong"><strong>n</strong></span> normálisának a kiszámítása, ha az  <span class="emphasis"><em>I</em></span>(<span class="emphasis"><em>x</em></span>,<span class="emphasis"><em>y</em></span>) képfényesség adott.</p><p>Az első megjegyzés, amit meg kell tenni, az az, hogy az <span class="strong"><strong>n</strong></span> meghatározása az adott (<span class="emphasis"><em>x</em></span>,<span class="emphasis"><em>y</em></span>) képpontfényesség ismeretében lokálisan alulhatározott. Ki tudjuk ugyan számítani az <span class="strong"><strong>n</strong></span> és a fényforrás közötti szöget, ez azonban az <span class="strong"><strong>n</strong></span>-et csak annyiban korlátozza, hogy egy bizonyos, <span class="strong"><strong>s</strong></span> irányú és <span class="emphasis"><em>θ</em></span> = cos<sup>–1</sup>(<span class="emphasis"><em>I/k</em></span>) palástszögű kúp felületén helyezkedik el. Hogy továbbléphessünk, jegyezzük meg, hogy képpontról képpontra az <span class="strong"><strong>n</strong></span> változása nem lehet tetszőleges. Egy sima felület normálisa csak sima módon változhat – amely korlátozást az <span class="strong"><strong>integrálhatóság</strong></span> (<span class="strong"><strong>integrability</strong></span>) szakkifejezéssel jelöljük. Ezt a felismerést számos módszerben fel is használják. Egy lehetséges eljárás az <span class="strong"><strong>n</strong></span> átírása a <span class="emphasis"><em>Z</em></span>(<span class="emphasis"><em>x</em></span>,<span class="emphasis"><em>y</em></span>) mélység <span class="emphasis"><em>Z<sub>x</sub></em></span> és <span class="emphasis"><em>Z<sub>y</sub></em></span> parciális deriváltjainak felhasználásával. Ennek eredménye <span class="emphasis"><em>Z</em></span> egy parciális differenciálegyenlete, amit megfelelő határfeltételek figyelembevételével <span class="emphasis"><em>Z</em></span>(<span class="emphasis"><em>x</em></span>,<span class="emphasis"><em>y</em></span>)-ra nézve meg lehet oldani.</p><p>Az eljárás általánosítható. Nem szükséges, hogy a felület Lambert-féle legyen, és az sem, hogy a fényforrás pontszerű legyen. Lényegében ugyanez a módszer használható, ha sikerül a felület <span class="emphasis"><em>R</em></span>(<span class="strong"><strong>n</strong></span>) <span class="strong"><strong>reflektanciatérkép</strong></span>ét (<span class="strong"><strong>reflectance map</strong></span>) meghatározni, amely a felületelem fényességét annak <span class="strong"><strong>n</strong></span> normálisa függvényében fejezi ki.</p><p>Az igazi nehézség a kölcsönös visszaverődések kezelése. Egy tipikus belsőtérjelenet esetén, mint például egy irodában lévő tárgyak esetén a felületeket nem csupán a fényforrások világítják meg, hanem a jelenet más felületeitől visszavert fény is, amelyek tényleges másodlagos fényforrásokként szolgálnak. Ezek a kölcsönös megvilágítási hatások igen jelentősek lehetnek. Az ilyen helyzetben a reflektanciatérkép megközelítés teljes mértékben használhatatlan – a kép fényessége nemcsak a normálison múlik, hanem a jelenet különböző felületeinek bonyolult térbeli viszonyain is.</p><p>Az ember az árnyalásból képes valamilyen mértékű alakinformáció kinyerésére, így ez a probléma – minden nehézsége ellenére – továbbá is érdekes marad.</p></div><div class="section" title="Kontúrok"><div class="titlepage"><div><div><h2 class="title"><a id="id784334"/>Kontúrok</h2></div></div></div><p>Amikor egy olyan vonalas rajzot nézünk, mint amilyen a 24.13. ábra, a kép egy háromdimenziós elrendezés életszerű benyomását kelti bennünk. Hogyan lehetséges ez? Hiszen láttuk korábban, hogy egy és ugyanaz a vonalas kép végtelen sok jelenet konfigurációból származhat. Figyeljük meg, hogy még a felszín lejtésének és emelkedésének érzetét is megkapjuk. Ez minden bizonnyal (a tipikus alakzatokra vonatkozó) magas szintű tudás és valamilyen alacsony szintű kényszerek összekapcsolásának következtében lehetséges.</p><div class="figure"><a id="id784340"/><p class="title"><strong>24.13. ábra - Egy felidéző vonalas rajz (Isha Malik hozzájárulásával)</strong></p><div class="figure-contents"><div class="mediaobject"><img src="kepek/24-13.png" alt="Egy felidéző vonalas rajz (Isha Malik hozzájárulásával)"/></div></div></div><p>A vonalas ábrában rejlő kvalitatív tudással fogunk foglalkozni. Korábban láttuk, hogy a rajz vonalainak különféle lehet a fontossága (lásd 24.4. ábra és kísérőszövege). Az a folyamat, ahogy a kép minden vonalának a tényleges fontosságát megállapítjuk, a <span class="strong"><strong>vonalcímkézés</strong></span> (<span class="strong"><strong>line labeling</strong></span>), és ez volt a számítógépes látás által elsőként tanulmányozott problémák egyike. Tegyük fel egyelőre, hogy a világ olyan leegyszerűsített modelljével dolgozunk, ahol a tárgyaknak nincsenek felületei, és ahol az olyan vonalakat, amelyek megvilágítási diszkontinuitásokból adódnak, mint amilyenek az árnyékélek és a tükrözések, valamilyen előfeldolgozó eljárással a képből kiemeltük. A figyelmünket így olyan vonalas ábrákra összpontosíthatjuk, ahol minden vonal vagy mélységi, vagy orientáció diszkontinuitáshoz tartozik.</p><p>Mindegyik vonalat ezek után vagy egy a felület határán megjelenő<span class="strong"><strong> pszeudoél</strong></span> (<span class="strong"><strong>limb</strong></span>) vetületének (ami a felület azon pontjainak összessége, ahol a rálátás iránya a felület érintője), vagy egy <span class="strong"><strong>él</strong></span>nek (<span class="strong"><strong>edge</strong></span>) lehet tekinteni (ami a felület normálisának egy diszkontinuitása). Az éleket továbbá konvex, konkáv vagy határoló élosztályokba sorolhatjuk. A pszeudoélek és a határoló élek esetén érdekes annak az eldöntése, hogy a vonalas ábrán a görbét határoló két felületből melyik van hozzánk közelebb. Ezeket a következtetéseket úgy képzelhetjük el, hogy mindegyik vonalhoz a 6 lehetséges <span class="strong"><strong>vonalcímké</strong></span>nek (<span class="strong"><strong>line label</strong></span>) az egyikét rendeljük hozzá, ahogy az a 24.14. ábrán látható.</p><div class="figure"><a id="id784392"/><p class="title"><strong>24.14. ábra - Különféle vonalcímkék</strong></p><div class="figure-contents"><div class="mediaobject"><img src="kepek/24-14.png" alt="Különféle vonalcímkék"/></div></div></div><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p>A „+” és a „–” címkék rendre a konvex és a konkáv éleket jelentik. Ezeket az olyan normális diszkontinuitásokhoz rendeljük, ahol az él mentén találkozó mindkét felület látható.</p></li><li class="listitem"><p>A „←” és a „→” határoló konvex éleket jelentenek. A kamerával felülről nézve az él mentén találkozó mindkét felületelem azonos oldalon fekszik úgy, hogy az egyik eltakarja a másikat. Ha a nyíl irányába mozgunk, a felületek hozzánk képest jobbra esnek.</p></li><li class="listitem"><p>A „←←” és a „→→” címkék a pszeudoéleket jelölik. Az ilyen helyeken a felület sima módon görbül, és saját magát takarja. Ha a dupla nyíl irányába lépünk, a felület tőlünk jobbra helyezkedik. A rálátás iránya a pszeudoél minden pontjában a felület érintője. Ahogy a nézőpont változik, a pszeudoél a felület mentén mozog.</p></li></ol></div><p>Egy ábrán található <span class="emphasis"><em>n</em></span> számú vonal kombinatorikusan elvileg lehetséges  címke-hozzárendelésből csupán csekély számú hozzárendelés lehetséges fizikailag. Ezeknek a címkézéseknek a megállapítása az ún. vonalcímkézési probléma. Jegyezzük meg, hogy a probléma csak akkor értelmes, ha a címke a vonal mentén nem változik. Ez nem mindig igaz, hiszen a görbült objektumok képein a címke egy vonal mentén igenis változhat. Ebben a részben ez nem jelent problémát, mert csak poliéderes objektumokkal foglalkozunk.</p><p>A poliéderes jelenetelemzéssel először Huffman és tőle függetlenül Clowes próbálkoztak (Huffman, 1971; Clowes, 1971). Huffman és Clowes elemzésüket a nem átlátszó <span class="strong"><strong>triéderes</strong></span> (<span class="strong"><strong>trihedral</strong></span>) testekből – azaz olyan testekből, amelyeknél mindegyik sarokpontjánál pontosan három felület fut össze – álló jelenetek esetére korlátozták. A több objektumot tartalmazó jelenetek esetén kizárták a triéderes feltételt megsértő objektumkonfigurációkat is, mint amilyen például az egyik élük mentén érintkező két kocka. Nem engedték a <span class="strong"><strong>repedés</strong></span>eket (<span class="strong"><strong>crack</strong></span>s) sem, azaz olyan „éleket”, amelyek mentén a tangenciális síkok folytonosan változnak. A triéderes világban Huffman és Clowes kimerítő listát adtak az összes különböző sarokponttípusról meg arról is, hogy azok hogyan látszhatnak általános nézőpontból szemlélve. Az általános nézőpont feltétel lényegében azt tételezi fel, hogy az összes csatlakozás megtartja a jellegét, ha a szem csak kissé mozdul el. Ha például a képen három vonal metszi egymást, akkor a feltételből következik, hogy a jelenet hozzájuk tartozó éleinek szintén metszeniük kell egymást.</p><div class="figure"><a id="id784444"/><p class="title"><strong>24.15. ábra - A triéderes csúcsok négy fajtája</strong></p><div class="figure-contents"><div class="mediaobject"><img src="kepek/24-15.png" alt="A triéderes csúcsok négy fajtája"/></div></div></div><p>A 24.15. ábra mutatja azt a négyféle helyzetet, ahogy a három síkfelület egy sarokpontban találkozhat. Ezeket az eseteket úgy szerkesztettük, hogy egy kockát nyolc <span class="strong"><strong>oktáns</strong></span>ra (<span class="strong"><strong>octant</strong></span>) bontottunk. A triéderes sarokpontok egész választékát szeretnénk generálni a kocka középpontjában úgy, hogy a különböző oktánsokat kitöltjük. Az 1-es címkéjű sarokpont az egyetlenegy kitöltött oktánshoz tartozik, a 3-as címkéjű a három kitöltött oktánshoz és így tovább. Az olvasónak kellene belátnia, hogy ezek tényleg kimerítik <span class="emphasis"><em>az összes</em></span> lehetséges helyzetet. Ha valaki például a kockában két oktánst kitölt, akkor nem lesz képes a középpontban egy érvényes triéderes sarokpontot megszerkeszteni. Jegyezzük meg azt is, hogy ezen négy eset a sarokpontban találkozó konvex és konkáv élek különböző kombinációinak felel meg.</p><p>A sarokpontban találkozó három él a körülöttük lévő teret nyolc oktánsra osztja. A sarokpontot bármely, anyaggal nem kitöltött oktánsból lehet szemlélni. A nézőpont oktánson belüli elmozdítása a képen látható csatlakozások jellegét megváltoztatni nem fogja. A 24.15. ábrán látható 1-es címkéjű sarokpontot a maradó hét oktánsból szemlélve a 24.16. ábrán látható csatlakozáscímkéket kapjuk.</p><p>Annak kimerítő vizsgálata, hogy egy sarokpont milyen módon látható, a 24.17. ábrán felsorolt lehetőségekhez vezet. A képen négy különböző csatlakozástípust azonosíthatunk: L, Y, nyíl- és T csatlakozást. Az L csatlakozás a két látható él esete. Az Y és a nyílcsatlakozás három élnek felel meg. Az Y csatlakozásban a szögek egyike sem lépi túl a 180°-ot. A T csatlakozás a takarással kapcsolatos. Ha egy közeli, nem átlátszó felület egy távolabbi élt eltakar, egy fél éllel találkozó folytonos élt kapunk. A T csatlakozás négy címkéje a négyféle él takarásának felel meg.</p><div class="figure"><a id="id784474"/><p class="title"><strong>24.16. ábra - A 24.15. ábrán 1-gyel jelölt csúcs különböző előfordulásai</strong></p><div class="figure-contents"><div class="mediaobject"><img src="kepek/24-16.png" alt="A 24.15. ábrán 1-gyel jelölt csúcs különböző előfordulásai"/></div></div></div><div class="figure"><a id="id784484"/><p class="title"><strong>24.17. ábra - A Huffman–Clowes-címkekészlet</strong></p><div class="figure-contents"><div class="mediaobject"><img src="kepek/24-17.png" alt="A Huffman–Clowes-címkekészlet"/></div></div></div><p>Ha egy vonalas rajzot ennek a csatlakozásszótárnak a segítségével címkézünk meg, a probléma annak a megállapítása, hogy mely csatlakozásinterpretációk lesznek globálisan konzisztensek. A konzisztenciát az a szabály kényszeríti ki, miszerint a rajzon egy vonalnak egy és csakis egy címkéje lehet a vonal egész hosszában. Ezen probléma algoritmikus megoldását Waltz adta meg (pontosabban egy olyan kibővített probléma megoldását adta meg, amely az árnyékot, a görbületi diszkontinuitásokat [repedéseket] és a szétválaszthatóan konkáv éleket is figyelembe veszi [Waltz, 1975]). Az algoritmus a kényszerkielégítés egyik legelső alkalmazása volt az MI területén (lásd 5. fejezet). A kényszerkielégítés nyelvén a változók a csatlakozások, a változók értékei a csatlakozások címkézése, a kényszer pedig az, hogy minden vonalnak csak egy címkéje van. Bár a triéderes vonalcímkézési probléma NP-teljes, a közönséges kényszerkielégítési algoritmusok a gyakorlatban jól működnek.</p></div><div class="footnotes"><br/><hr/><div class="footnote"><p class="footnote text"><sup>[<a id="ftn.id783998" href="#id783998" class="para">272</a>] </sup> avagy „textile” (<span class="emphasis"><em>A ford.</em></span>)</p></div></div></div></body></html>
